{
  "version": "0.1",
  "name": "HR",
  "catalogue": "hr",
  "destination": {
    "application": "GOBPrepare"
  },
  "actions": [
    {
      "type": "clear",
      "schemas": [
        "hr",
        "hr_prep"
      ],
      "id": "clear_schemas"
    },
    {
      "type": "import_dump",
      "id": "import_kvkadr",
      "objectstore": "HandelsregisterObjectstore",
      "read_config": {
        "file_filter": "mks-dump/kvkadr.sql.gz",
        "container": "handelsregister",
        "filter_list": "^GRANT|^DROP|^SELECT pg_catalog\\.set_config|^REVOKE|^CREATE (TRIGGER|INDEX)|ADD CONSTRAINT|^ALTER TABLE|^SET default_table_access_method",
        "substitution": {
          "igp_[a-zA-Z0-9_]+_cmg_owner": "hr",
          "(geopunt(.*?)\\.geometry\\(Point(.*?)\n)": "geopunt public.geometry(POINT,28992)"
        },
        "comments_regexp": "(?m)^\\s*--.*$|(^\/*.*?\\*\\$)",
        "split_regexp": ";\\n|^\\.\n'",
        "data_delimiter_regexp": "\\.\n",
        "copy_query_regex": "COPY.*FROM stdin;"
      },
      "depends_on": [
        "clear_schemas"
      ]
    },
    {
      "type": "import_dump",
      "id": "import_kvkmac",
      "objectstore": "HandelsregisterObjectstore",
      "read_config": {
        "file_filter": "mks-dump/kvkmac.sql.gz",
        "container": "handelsregister",
        "filter_list": "^GRANT|^DROP|^SELECT pg_catalog\\.set_config|^REVOKE|^CREATE (TRIGGER|INDEX)|ADD CONSTRAINT|^ALTER TABLE|^SET default_table_access_method",
        "substitution": {
          "igp_[a-zA-Z0-9_]+_cmg_owner": "hr",
          "(geopunt(.*?)\\.geometry\\(Point(.*?)\n)": "geopunt public.geometry(POINT,28992)"
        },
        "comments_regexp": "(?m)^\\s*--.*$|(^\/*.*?\\*\\$)",
        "split_regexp": ";\\n|^\\.\n'",
        "data_delimiter_regexp": "\\.\n",
        "copy_query_regex": "COPY.*FROM stdin;"
      },
      "depends_on": [
        "clear_schemas"
      ]
    },
    {
      "type": "import_dump",
      "id": "import_kvkves",
      "objectstore": "HandelsregisterObjectstore",
      "read_config": {
        "file_filter": "mks-dump/kvkves.sql.gz",
        "container": "handelsregister",
        "filter_list": "^GRANT|^DROP|^SELECT pg_catalog\\.set_config|^REVOKE|^CREATE (TRIGGER|INDEX)|ADD CONSTRAINT|^ALTER TABLE|^SET default_table_access_method",
        "substitution": {
          "igp_[a-zA-Z0-9_]+_cmg_owner": "hr",
          "(geopunt(.*?)\\.geometry\\(Point(.*?)\n)": "geopunt public.geometry(POINT,28992)"
        },
        "comments_regexp": "(?m)^\\s*--.*$|(^\/*.*?\\*\\$)",
        "split_regexp": ";\\n|^\\.\n'",
        "data_delimiter_regexp": "\\.\n",
        "copy_query_regex": "COPY.*FROM stdin;"
      },
      "depends_on": [
        "clear_schemas"
      ]
    },
    {
      "type": "import_dump",
      "id": "import_kvkveshis",
      "objectstore": "HandelsregisterObjectstore",
      "read_config": {
        "file_filter": "mks-dump/kvkveshis.sql.gz",
        "container": "handelsregister",
        "filter_list": "^GRANT|^DROP|^SELECT pg_catalog\\.set_config|^REVOKE|^CREATE (TRIGGER|INDEX)|ADD CONSTRAINT|^ALTER TABLE|^SET default_table_access_method",
        "substitution": {
          "igp_[a-zA-Z0-9_]+_cmg_owner": "hr",
          "(geopunt(.*?)\\.geometry\\(Point(.*?)\n)": "geopunt public.geometry(POINT,28992)"
        },
        "comments_regexp": "(?m)^\\s*--.*$|(^\/*.*?\\*\\$)",
        "split_regexp": ";\\n|^\\.\n'",
        "data_delimiter_regexp": "\\.\n",
        "copy_query_regex": "COPY.*FROM stdin;"
      },
      "depends_on": [
        "clear_schemas"
      ]
    },
    {
      "type": "import_dump",
      "id": "import_kvkprs",
      "objectstore": "HandelsregisterObjectstore",
      "read_config": {
        "file_filter": "mks-dump/kvkprs.sql.gz",
        "container": "handelsregister",
        "filter_list": "^GRANT|^DROP|^SELECT pg_catalog\\.set_config|^REVOKE|^CREATE (TRIGGER|INDEX)|ADD CONSTRAINT|^ALTER TABLE|^SET default_table_access_method",
        "substitution": {
          "igp_[a-zA-Z0-9_]+_cmg_owner": "hr",
          "(geopunt(.*?)\\.geometry\\(Point(.*?)\n)": "geopunt public.geometry(POINT,28992)"
        },
        "comments_regexp": "(?m)^\\s*--.*$|(^\/*.*?\\*\\$)",
        "split_regexp": ";\\n|^\\.\n'",
        "data_delimiter_regexp": "\\.\n",
        "copy_query_regex": "COPY.*FROM stdin;"
      },
      "depends_on": [
        "clear_schemas"
      ]
    },
    {
      "type": "import_dump",
      "id": "import_kvkprsash",
      "objectstore": "HandelsregisterObjectstore",
      "read_config": {
        "file_filter": "mks-dump/kvkprsash.sql.gz",
        "container": "handelsregister",
        "filter_list": "^GRANT|^DROP|^SELECT pg_catalog\\.set_config|^REVOKE|^CREATE (TRIGGER|INDEX)|ADD CONSTRAINT|^ALTER TABLE|^SET default_table_access_method",
        "substitution": {
          "igp_[a-zA-Z0-9_]+_cmg_owner": "hr",
          "(geopunt(.*?)\\.geometry\\(Point(.*?)\n)": "geopunt public.geometry(POINT,28992)"
        },
        "comments_regexp": "(?m)^\\s*--.*$|(^\/*.*?\\*\\$)",
        "split_regexp": ";\\n|^\\.\n'",
        "data_delimiter_regexp": "\\.\n",
        "copy_query_regex": "COPY.*FROM stdin;"
      },
      "depends_on": [
        "clear_schemas"
      ]
    },
    {
      "type": "import_dump",
      "id": "import_kvkveshdn",
      "objectstore": "HandelsregisterObjectstore",
      "read_config": {
        "file_filter": "mks-dump/kvkbeshdn.sql.gz",
        "container": "handelsregister",
        "filter_list": "^GRANT|^DROP|^SELECT pg_catalog\\.set_config|^REVOKE|^CREATE (TRIGGER|INDEX)|ADD CONSTRAINT|^ALTER TABLE|^SET default_table_access_method",
        "substitution": {
          "igp_[a-zA-Z0-9_]+_cmg_owner": "hr",
          "(geopunt(.*?)\\.geometry\\(Point(.*?)\n)": "geopunt public.geometry(POINT,28992)"
        },
        "comments_regexp": "(?m)^\\s*--.*$|(^\/*.*?\\*\\$)",
        "split_regexp": ";\\n|^\\.\n'",
        "data_delimiter_regexp": "\\.\n",
        "copy_query_regex": "COPY.*FROM stdin;"
      },
      "depends_on": [
        "clear_schemas"
      ]
    },
    {
      "type": "import_dump",
      "id": "import_kvkhdn",
      "objectstore": "HandelsregisterObjectstore",
      "read_config": {
        "file_filter": "mks-dump/kvkhdn.sql.gz",
        "container": "handelsregister",
        "filter_list": "^GRANT|^DROP|^SELECT pg_catalog\\.set_config|^REVOKE|^CREATE (TRIGGER|INDEX)|ADD CONSTRAINT|^ALTER TABLE|^SET default_table_access_method",
        "substitution": {
          "igp_[a-zA-Z0-9_]+_cmg_owner": "hr",
          "(geopunt(.*?)\\.geometry\\(Point(.*?)\n)": "geopunt public.geometry(POINT,28992)"
        },
        "comments_regexp": "(?m)^\\s*--.*$|(^\/*.*?\\*\\$)",
        "split_regexp": ";\\n|^\\.\n'",
        "data_delimiter_regexp": "\\.\n",
        "copy_query_regex": "COPY.*FROM stdin;"
      },
      "depends_on": [
        "clear_schemas"
      ]
    },
    {
      "type": "execute_sql",
      "description": "Create HR vestigingen table",
      "id": "create_hr_ves",
      "query_src": "file",
      "query": "data/sql/hr/create.vestigingen.sql",
      "depends_on": [
        "import_kvkves",
        "import_kvkveshdn",
        "import_kvkhdn",
        "import_kvkadr",
        "import_kvkmac"
      ]
    },
    {
      "type": "execute_sql",
      "description": "Create HR maatschappelijkeactiviteiten table",
      "id": "create_hr_mac",
      "query_src": "file",
      "query": "data/sql/hr/create.maatschappelijke_activiteiten.sql",
      "depends_on": [
        "import_kvkmac",
        "import_kvkadr",
        "import_kvkhdn",
        "import_kvkves"
      ]
    },
    {
      "type": "execute_sql",
      "description": "Create HR functievervulling table",
      "id": "create_hr_fvv",
      "query_src": "file",
      "query": "data/sql/hr/create.functievervulling.sql",
      "depends_on": [
        "import_kvkprsash"
      ]
    },
    {
      "type": "execute_sql",
      "description": "Create HR nietnatuurlijkpersoon table",
      "id": "create_hr_nnp",
      "query_src": "file",
      "query": "data/sql/hr/create.niet_natuurlijk_persoon.sql",
      "depends_on": [
        "import_kvkprs",
        "import_kvkprsash"
      ]
    },
    {
      "type": "execute_sql",
      "description": "Create HR natuurlijkpersoon. table",
      "id": "create_hr_nps",
      "query_src": "file",
      "query": "data/sql/hr/create.natuurlijkpersoon.sql",
      "depends_on": [
        "import_kvkprs",
        "import_kvkprsash"
      ]
    },
    {
      "type": "publish_schemas",
      "id": "publish_schemas",
      "publish_schemas": {
        "hr_prep": "hr_prepared"
      },
      "depends_on": "*"
    }
  ]
}
